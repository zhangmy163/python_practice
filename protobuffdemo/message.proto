syntax = "proto3";

package model;
option go_package = "model";
option java_package = "com.datatreker.inti.model";
option java_outer_classname = "MessageFactory";

message Message {
  string cid = 1; //Id of the client,represented as site key or site id.
  string uid = 2; //Id of the user generated by the client library.
  string sid = 3; //Id of the current session generated by the client library.
  string domain = 4; //Domain of the current client site.
  message MessageContext {
    string ln = 1; //Name of the library.
    string lv = 2; //Version of the library.
    string ip = 3; //IPAddress of the current user
    string ref = 4; //Referer of the current user.
    string ua = 5; //Useragent of the current user.
  }
  MessageContext context = 5;
  message MessagePacket {
    string vid = 1; //Id of the current view or scenario.
    int64 ts = 2; //UTC Timestamp of the first event belong to the current data packet.
    int32 status = 3; //Status of the current data packet.
    int32 size = 4; //Length of the serialized data
    bytes data = 5; //Serialized data of the event list.
    map<string, bytes> payload = 6; //Binary data of the some events.
  }
  repeated MessagePacket packet = 6;
}
